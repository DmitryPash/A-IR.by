<div class="mfp-popup mfp-anim popup-password">
  <div class="mfp-popup-title popup-review-title sign-company">
    Регистрация юр. лица
  </div>

  <div class="sign-company-txt">
    <div class="sign-company-headline">
      Общие данные
    </div>
    <div class="sign-company-steps">
      Шаг <span>1 </span> из 2
    </div>
    <div class="progress-bar"></div>
  </div>

  <div class="sign-company-first">
    <form action="#" class="sign-sompany-first-form">
      <div class="ui-field">
        <label class="ui-label ui-label-mini" for="inn">УНП <span class="ui-color-red">*</span></label>
        <div class="ui-input-wrp">
          <input type="text" name="inn" id="inn" class="ui-input" placeholder="123456778">
          <div class="popup-icon"></div>
        </div>
      </div>

      <div class="ui-field">
        <label class="ui-label ui-label-mini" for="name">Контактное лицо <span class="ui-color-red">*</span></label>
        <div class="ui-input-wrp">
          <input type="text" name="name" id="name" class="ui-input" placeholder="Иванов Иван Иванович">
          <div class="popup-icon"></div>
        </div>
      </div>

      <div class="ui-field">
        <label class="ui-label ui-label-mini" for="email">Email <span class="ui-color-red">*</span></label>
        <div class="ui-input-wrp">
          <input type="text" name="email" id="email" class="ui-input" placeholder="123@gmail.com">
          <div class="popup-icon"></div>
        </div>
      </div>

      <div class="ui-field">
        <label class="ui-label ui-label-mini" for="telephone">Телефон <span class="ui-color-red">*</span></label>
        <div class="ui-input-wrp">
          <input type="text" name="telephone" id="telephone" class="ui-input" placeholder="+375 (33) 398 18 18">
          <div class="popup-icon"></div>
        </div>
      </div>

      <div class="ui-checkbox">
        <input type="checkbox" id="customCheckbox" class="ui-checkbox-input" checked="">
        <label for="customCheckbox" class="ui-checkbox-label">
          <span class="default-txt">
            Нажимая кнопку «Далее» вы соглашаетесь с <a href="#">политикой обработки персональных данных.</a>
          </span>

          <span class="mob-txt">Я соглашаюсь с <a href="#">политикой обработки персональных данных.</a></span>
        </label>
      </div>

      <button type="sumbit" class="ui-btn ui-btn-block ui-btn-blue margin-31 btn-next">Далее</button>

      <span class="popup-password-link">Уже зарегистрированы? <a href="#" class="mfp-link" data-href="./popups/sign-in.html">Войти</a></span>
    </form>
  </div>

  <div class="sign-company-second">
    <form action="#" class="sign-sompany-second-form">
      <div class="ui-field">
        <label class="ui-label ui-label-mini" for="nameCompany">Название организации или ИП <span class="ui-color-red">*</span></label>
        <div class="ui-input-wrp">
          <input type="text" name="nameCompany" id="nameCompany" class="ui-input" placeholder="Название организации">
          <div class="popup-icon"></div>
        </div>
      </div>

      <div class="ui-field">
        <label class="ui-label ui-label-mini" for="address">Юридический адрес <span class="ui-color-red">*</span></label>
        <div class="ui-input-wrp">
          <input type="text" name="address" id="address" class="ui-input" placeholder="Индекс, город ,улица, дом, офис">
          <div class="popup-icon"></div>
        </div>
      </div>

      <div class="ui-field">
        <label class="ui-label ui-label-mini" for="bank">Банк <span class="ui-color-red">*</span></label>
        <div class="ui-input-wrp">
          <input type="text" name="bank" id="bank" class="ui-input" placeholder="ЗАО Альфа-Банк">
          <div class="popup-icon"></div>
        </div>
      </div>

      <div class="ui-field">
        <label class="ui-label ui-label-mini" for="bik">БИК <span class="ui-color-red">*</span></label>
        <div class="ui-input-wrp">
          <input type="text" name="bik" id="bik" class="ui-input" placeholder="XXXXXXXX">
          <div class="popup-icon"></div>
        </div>
      </div>

      <div class="ui-field">
        <label class="ui-label ui-label-mini" for="iban">Расчётный счёт IBAN <span class="ui-color-red">*</span></label>
        <div class="ui-input-wrp">
          <input type="text" name="iban" id="iban" class="ui-input" placeholder="BY XX XXXXXX XXXXX XXXX XXXXXXXXXX">
          <div class="popup-icon"></div>
        </div>
      </div>

      <div class="ui-checkbox">
        <input type="checkbox" id="customCheckbox" class="ui-checkbox-input" checked="">
        <label for="customCheckbox" class="ui-checkbox-label">Нажимая кнопку «Зарегистрироваться» вы соглашаетесь <a href="#">с политикой обработки персональных данных.</a></label>
      </div>

      <button type="submit" class="ui-btn ui-btn-block ui-btn-red">Зарегистрироваться</button>
    </form>
  </div>

  <script>
    $( document ).ready(function() {
      const txtHeadline = document.querySelector('.sign-company-headline');
      const txtSteps = document.querySelector('.sign-company-steps span');
      const firstStep = document.querySelector('.sign-company-first');
      const secondStep = document.querySelector('.sign-company-second');
      const progressBar = document.querySelector('.progress-bar');

      // validate form
      $(".sign-sompany-first-form").validate({
       errorElement: 'span',
       errorPlacement: function (error, element) {
          if (element.attr("type") == "checkbox") {
             return element.next('label').append(error);
          }
          error.insertAfter($(element));
       },
       rules: {
          email: {
             required: true,
             email: true,
             emailErr: true,
          },
          telephone: {
            required: true,
            minlength: 17,
            // telephone: true,
          },
          name: {
             required: true,
             lettersonly: true,
          },
          inn: {
            required:true,
            number: true,
          },
       },

         highlight: function(element, errorClass, validClass) {
          $(element).addClass(errorClass).removeClass(validClass);
          $(element).closest('.ui-field').find('.popup-icon')
            .addClass(errorClass).removeClass(validClass);

        },
        unhighlight: function(element, errorClass, validClass) {
          $(element).removeClass(errorClass).addClass(validClass);
          $(element).closest('.ui-field').find('.popup-icon')
            .removeClass(errorClass).addClass(validClass);
        },


       submitHandler: function(form) {
         txtHeadline.textContent = 'Юридические данные';
         txtSteps.textContent = '2';

         firstStep.style.display = 'none';
         secondStep.style.display = 'block';
         progressBar.style.width = '100%';

        //submit via ajax
        return false;  //This doesn't prevent the form from submitting.
    },

       messages: {
        email: {
            required: "Введите свой email",
            email: "Введите корректное email",
            emailErr: `<div class='inn-occupied'>
          Пользователь уже существует <a href="#">Войти</a>
          </div>`
         },
        name: {
           required: "Введите своё ФИО",
           lettersonly: "Введите корректное ФИО",
        },
        telephone: {
          required: "Введите данные",
          minlength: "Введите полный номер",
        },
        inn: {
          required:"Введите свой УНП",
          number: 'Введите корректный УНП',
        },
     },
    });
      $(".sign-sompany-second-form").validate({
       errorElement: 'span',
       errorPlacement: function (error, element) {
          if (element.attr("type") == "checkbox") {
             return element.next('label').append(error);
          }
          error.insertAfter($(element));
       },
       rules: {
          nameCompany: {
             required: true,
             lettersonly: true,
          },
          address: {
             required: true,
             lettersonly: true,
          },
          bank: {
             required: true,
             lettersonly: true,
          },
          bik: {
             required: true,
            //  number: true,
          },
          iban: {
             required: true,
             number: true,
          },
       },

       highlight: function(element, errorClass, validClass) {
          $(element).addClass(errorClass).removeClass(validClass);
          $(element).closest('.ui-field').find('.popup-icon')
            .addClass(errorClass).removeClass(validClass);

        },
        unhighlight: function(element, errorClass, validClass) {
          $(element).removeClass(errorClass).addClass(validClass);
          $(element).closest('.ui-field').find('.popup-icon')
            .removeClass(errorClass).addClass(validClass);
        },

       messages: {
        nameCompany: {
           required: "Введите название организации или ИП",
           lettersonly: "Введите корректные данные",
        },
        address: {
           required: "Введите юридический адрес",
           lettersonly: "Введите корректные данные",
        },
        bank: {
           required: "Введите название банка",
           lettersonly: "Введите корректные данные",
        },
        bik: {
           required: "Введите данные БИК",
          //  number: "Введите корректные данные",
        },
        iban: {
           required: "Введите расчётный счет IBAN",
           number: "Введите корректные данные",
        },
     },
    });

    jQuery.validator.addMethod(
      "lettersonly",
      function (value, element) {
        return this.optional(element) || /^[a-zA-ZА-Яа-я\s,ё]+$/i.test(value);
      },
      "Incorrect format"
    );


    // jQuery.validator.addMethod(
    //     "telephone",
    //     function (value, element) {
    //       return (
    //         this.optional(element) ||
    //         /^(\s*)?(\+)?([- _():=+]?\d[- _():=+]?){6,14}(\s*)?$/i.test(value)
    //       );
    //     },
    //     "Incorrect format"
    //   );
      jQuery.validator.addMethod(
        "emailErr",
        function (value, element) {
          if(/123@gmail.com/.test(value))  {
            return false;
          } else {
              return true
          }
        },
        "Incorrect format"
      );

      var phoneMask = IMask(
      document.getElementById('telephone'), {
        mask: '+{000}(00)000-00-00'
      });

      // var element = document.getElementById("telephone");
      // var maskOptions = {
      //   placeholder: "+{000}(00)000-00-00",
      //   mask: "+{000}(00)000-00-00",
      // };
      // var mask = IMask(element, maskOptions);
  });
  </script>
</div>