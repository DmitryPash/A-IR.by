<div class="popup">
  <div class="popup-title">
    В другом магазине цена ниже, чем у нас? Сообщите!
  </div>
  <div class="popup-product">
    Товар:
    <a href="#" class="popup-product-link"
      >Винтовой компрессор A1R BB-4FC, 10 бар</a
    >
  </div>
  <div class="popup-line"></div>

  <form action="" class="popup-price popup-fastOder">
    <div class="popup-backcall-inputs">
      <label class="popup-label" for="email"
        >Ссылка на товар в другом магазине <span>*</span></label
      >
      <input
        type="text"
        name="email"
        id="email"
        class="popup-input"
        placeholder="123@gmail.com"
      />
      <div class="popup-icon">
      </div>
    </div>

    <div class="popup-backcall-inputs">
      <label class="popup-label" for="price"
        >Цена в другом магазине, BYN <span>*</span></label
      >
      <input
        type="text"
        name="price"
        id="price"
        class="popup-input"
        placeholder="1 200"
      />
      <div class="popup-icon">
      </div>
    </div>

    <div class="popup-backcall-inputs">
      <label class="popup-label" for="name">Ваше имя <span>*</span></label>
      <input
        type="text"
        name="name"
        id="name"
        class="popup-input"
        placeholder="Иванов Иван Иванович"
      />
  
      <div class="popup-icon">
      </div>
    </div>

    <div class="popup-backcall-inputs">
      <label class="popup-label" for="telephone">Телефон <span>*</span></label>
      <input
        type="text"
        name="telephone"
        id="telephone"
        class="popup-input"
        placeholder="+375 (33) 398-18-18"
      />
      <div class="popup-icon">
      </div>
    </div>

    <div class="popup-agreement">
      <div class="checkbox">
        <input
          type="checkbox"
          id="customCheckbox"
          name="customCheckbox"
          class="checkbox-input"
        />
        <label for="customCheckbox" class="checkbox-label"></label>
      </div>
      <div class="popup-agreement-txt">
        Нажимая кнопку «Отправить запрос» вы соглашаетесь
        <a href="#" class="popup-agreement-link"
          >с политикой обработки персональных данных.</a
        >
      </div>
    </div>
    <!-- <div class="popup-agreement">
      <div class="checkbox">
        <input
          type="checkbox"
          id="customCheckbox"
          name="customCheckbox"
          class="checkbox-input"
        />
        <label for="customCheckbox" class="checkbox-label"></label>
      </div>
      <div class="popup-agreement-txt">
        <a href="#" class="popup-agreement-link"
          >с политикой обработки персональных данных.</a
        >
      </div>
    </div> -->
    <button type="submit" class="popup-btn">Отправить запрос</button>
  </form>
  <script>
    $(document).ready(function () {
      $(".popup-price").validate({
        errorElement: "span",
        rules: {
          email: {
            required: true,
            email: true,
          },
          telephone: {
            required: true,
            minlength: 12,
            telephone: true,
          },
          name: {
            required: true,
            lettersonlyName: true,
          },
          number: {
            required: true,
            number: true,
          },
          person: {
            required: true,
          },
          customCheckbox: {
            required: true,
          },
          price: {
            required: true
          }
        },
        messages: {
          email: {
            required: "Введите данные",
          },
          name: {
            required: "Введите данные",
          },
          telephone: {
            required: "Введите данные",
            minlength: " ",
          },
          number: {
            required: "Введите данные",
          },
          person: {
            required: "Введите данные",
          },
          price: {
            required: "Введите данные"
          }
        },
        highlight: function(element, errorClass, validClass) {
          $(element).addClass(errorClass).removeClass(validClass);
          $(element).closest('.popup-backcall-inputs').find('.popup-icon')
            .addClass(errorClass).removeClass(validClass);
          
        },
        unhighlight: function(element, errorClass, validClass) {
          $(element).removeClass(errorClass).addClass(validClass);
          $(element).closest('.popup-backcall-inputs').find('.popup-icon')
            .removeClass(errorClass).addClass(validClass);
        }
      });
    });

    jQuery.validator.addMethod(
      "telephone",
      function (value, element) {
        return (
          this.optional(element) ||
          /^(\s*)?(\+)?([- _():=+]?\d[- _():=+]?){6,14}(\s*)?$/i.test(value)
        );
      },
      " "
    );
    jQuery.validator.addMethod(
      "lettersonlyName",
      function (value, element) {
        return this.optional(element) || /^[a-zA-ZА-Яа-я\s]+$/i.test(value);
      },
      " "
    );
    jQuery.validator.addMethod(
      "email",
      function (value, element) {
        return (
          this.optional(element) ||
          /^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/i.test(
            value
          )
        );
      },
      " "
    );
    jQuery.validator.addMethod(
      "number",
      function (value, element) {
        return (
          this.optional(element) ||
          /^(\s*)?(\+)?([- _():=+]?\d[- _():=+]?){6,14}(\s*)?$/i.test(value)
        );
      },
      " "
    );
    var element = document.getElementById("telephone");
    var maskOptions = {
      placeholder: "+{000}(00)000-00-00",
      mask: "+{000}(00)000-00-00",
    };
    var mask = IMask(element, maskOptions);
  </script>
</div>
